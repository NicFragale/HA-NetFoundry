# Home Assistant Add-on: [OpenZiti](https://github.com/openziti) by NetFoundry

![Supports aarch64 Architecture][aarch64-shield]
![Supports amd64 Architecture][amd64-shield]
![Supports armv7 Architecture][armv7-shield]
![Supports i386 Architecture][i386-shield]
![Supports armhf Architecture][armhf-shield]

## Who is NetFoundry?

[NetFoundry](https://netfoundry.io) is the primary maintainer of the open source project [OpenZiti](https://github.com/openziti) and the SaaS counterpart [CloudZiti](https://nfconsole.io).

## What is OpenZiti / CloudZiti?

[OpenZiti](https://github.com/openziti) is a free and open source project focused on bringing zero trust networking principles directly into any application. The project provides all the pieces required to implement a zero trust overlay network and provides all the tools necessary to integrate zero trust into your existing solutions. The [OpenZiti](https://github.com/openziti) project believes the principles of zero trust shouldnâ€™t stop at your network, those ideas belong in your application.

[CloudZiti](https://nfconsole.io) SaaS delivers billions of sessions per year, and is built on the [OpenZiti](https://github.com/openziti) open source zero trust networking platform.

## What does this addon do?

This addon makes your Home Assistant instance remotely accessible via an [OpenZiti](https://github.com/openziti) tunnel. You can use this addon to remotely communicate with your Home Assistant instance from mobile (Android/iOS), roaming laptop, etc that runs the OpenZiti tunnel. As a primary benefit to the technology, there is no requirement for any open ports or Internet exposure to your Home Assistant or private network. You can also use the addon to access the downstream network attached to the Home Assistance instance provided there is routing to do so.

## How does it work?

The addon provides an [OpenZiti](https://github.com/openziti) tunneler running in a container which Home Assistant can use. The tunneler acts like a reverse proxy and depends on an [OpenZiti](https://github.com/openziti) Service you create in advance. The [OpenZiti](https://github.com/openziti) service specifies the address to access Home Assistant remotely. You must run a separate [OpenZiti](https://github.com/openziti) tunneler on each device where you remotely access Home Assistant through this addon.

## Add the repository...

One-Click:

[![OpenZiti Repo Redirect](https://my.home-assistant.io/badges/supervisor_add_addon_repository.svg)](https://my.home-assistant.io/redirect/supervisor_add_addon_repository/?repository_url=https%3A%2F%2Fgithub.com%2FNicFragale%2FHA-NetFoundry)

OR via UI:

1. Navigate in your Home Assistant frontend to **Supervisor** -> **Add-on Store**.
2. Find the "OpenZiti" add-on and click it.
3. Click on the "INSTALL" button.

## Install the addon...

After the repo is available in your UI, click the "install" button for the new [OpenZiti](https://github.com/openziti) Addon that appeared.

## How to use the addon...

Regardless of which system controls the tunnel endpoint (CloudZiti or OpenZiti), it must be registered as a valid identity. If you wish to try out the FREE TEAMS EDITION of [CloudZiti](https://nfconsole.io/signup), sign up at [CloudZiti](https://nfconsole.io/signup).

1. Clone and build your own [OpenZiti](https://github.com/openziti) network with [OpenZiti](https://github.com/openziti) or sign up for free to the [CloudZiti](https://nfconsole.io/signup) which automatically deploys almost all elements for you.
2. Follow instructions within your chosen path to create a new endpoint (identity) for your Home Assistant.
3. A JWT (Java Web Token) is the output of endpoint creation. This is a plain ASCII text file generated by your [OpenZiti](https://github.com/openziti) controller. You will need to copy the text within the JWT file and paste it exactly into the Home Assistant's [OpenZiti](https://github.com/openziti) addon configuration pane "EnrollmentJWT" field.
4. Once successfully registered after starting the application (check logs), you may remove the JWT text from the field. If this is not done, subsequent startups will attempt enrollment but fail to enroll the already utilized JWT and move into runtime.

You may register multiple identities (once per application startup) if desired. However, at least one identity is required to run. YES, you CAN enable your Home Assistant to participate as an identity in multiple networks!

If you need to remove an identity, log into your Home Assistant (IE SSH) and navigate to the identity directory (DEFAULT is /share/openziti/identities). You will find all of your enrolled identities in this directory. Delete the identity file (JSON) and restart the application.

If you delete the addon, the identities directory and enrolled identities within it will be retained should you reinstall later.

[aarch64-shield]: https://img.shields.io/badge/aarch64-yes-green.svg
[amd64-shield]: https://img.shields.io/badge/amd64-yes-green.svg
[armhf-shield]: https://img.shields.io/badge/armhf-yes-red.svg
[armv7-shield]: https://img.shields.io/badge/armv7-yes-green.svg
[i386-shield]: https://img.shields.io/badge/i386-yes-green.svg
