# Home Assistant Add-on: OpenZiti by NetFoundry

![Supports aarch64 Architecture][aarch64-shield]
![Supports amd64 Architecture][amd64-shield]
![Supports armhf Architecture][armhf-shield]
![Supports armv7 Architecture][armv7-shield]
![Supports i386 Architecture][i386-shield]

## What does it do?

This addon makes your Home Assistant instance remotely accessible via an OpenZiti tunnel. You can use this addon to remote control your HA instance from mobile, roaming laptop, etc.

## How does it work?

The addon provides an OpenZiti tunneler running in a container. The tunneler acts like a reverse proxy and depends on an OpenZiti Service you create in advance. The OpenZiti service specifies the address to access Home Assistant remotely. You must run a separate OpenZiti tunneler on each device where you remotely access Home Assistant through this addon.

## Add the Repository

One-Click:

[![NetFoundry OpenZiti Repo Redirect](https://my.home-assistant.io/badges/supervisor_add_addon_repository.svg)](https://my.home-assistant.io/redirect/supervisor_add_addon_repository/?repository_url=https%3A%2F%2Fgithub.com%2FNicFragale%2FHA-NetFoundry)

OR via UI:

1. Navigate in your Home Assistant frontend to **Supervisor** -> **Add-on Store**.
2. Find the "OpenZiti" add-on and click it.
3. Click on the "INSTALL" button.

## Install the Addon

After the repo is available in your UI, click the "install" button for the new OpenZiti Addon that appeared.

## How to Use the Addon

Regardless of which system controls the endpoint (CloudZiti or OpenZiti), the endpoint must be registered as a valid identity. If you wish to try out the FREE TEAMS EDITION of CloudZiti, sign up at [CloudZiti](https://nfconsole.io/signup).

1. Clone and build your own OpenZiti network with [OpenZiti](https://github.com/openziti) or sign up for free to the [CloudZiti](https://nfconsole.io/signup) which automatically deploys all elements for you.
2. Follow instructions within your chosen path to create a new endpoint (identity) for your Home Assistant.
3. A JWT (Java Web Token) is the output of endpoint creation. This is a plain ASCII text file generated by your OpenZiti controller. You will need to copy the text within the JWT file and paste it exactly into the Home Assistant's NetFoundry OpenZiti addon configuration pane "EnrollmentJWT" field.
4. Once successfully registered after starting the application (Check Logs), you may remove the JWT text from the field. If this is not done, subsequent startups will attempt enrollment but fail to enroll the already utilized JWT and move into runtime.

You may register multiple identities (once per application startup) if desired. However, at least one identity is required to run. YES, you CAN enable your Home Assistant to participate as an identity in multiple networks!

If you need to remove an identity, log into your Home Assistant (IE SSH) and navigate to the identity directory (DEFAULT is /share/NetFoundry/identities). You will find all of your enrolled identities in this directory. Delete the identity file (JSON) and restart the application.

If you delete the addon, the identities directory and enrolled identities within it will be retained should you reinstall later.

For more information, see the open-source project page at [OpenZiti](https://github.com/openziti).

[aarch64-shield]: https://img.shields.io/badge/aarch64-yes-green.svg
[amd64-shield]: https://img.shields.io/badge/amd64-yes-green.svg
[armhf-shield]: https://img.shields.io/badge/armhf-yes-green.svg
[armv7-shield]: https://img.shields.io/badge/armv7-yes-green.svg
[i386-shield]: https://img.shields.io/badge/i386-yes-green.svg
