# Home Assistant Add-on: NetFoundry OpenZITI

![Supports aarch64 Architecture][aarch64-shield]
![Supports amd64 Architecture][amd64-shield]
![Supports armhf Architecture][armhf-shield]
![Supports armv7 Architecture][armv7-shield]
![Supports i386 Architecture][i386-shield]

## Add the Repository

One-Click:

[![NetFoundry OpenZITI Repo Redirect](https://my.home-assistant.io/badges/supervisor_add_addon_repository.svg)](https://my.home-assistant.io/redirect/supervisor_add_addon_repository/?repository_url=https%3A%2F%2Fgithub.com%2FNicFragale%2FHA-NetFoundry)

OR via UI:

1. Navigate in your Home Assistant frontend to **Supervisor** -> **Add-on Store**.
2. Find the "NetFoundry OpenZITI" add-on and click it.
3. Click on the "INSTALL" button.

## Installation of the Addon

After the repo is available in your UI, click the "install" button for the new NetFoundry OpenZITI Addon that appeared.

## How to Use

Regardless of which system controls the endpoint (CloudZITI or OpenZITI) the endpoint must be registered as a valid identity. If you wish to try out the FREE TEAMS EDITION of CloudZITI, sign up at [CloudZITI](https://nfconsole.io/signup).

1. Clone and build your own OpenZITI network with [OpenZITI](https://github.com/openziti) or sign up for free to the [CloudZITI](https://nfconsole.io/signup) which automatically deploys all elements for you.
2. Follow instructions within your chosen path to create a new endpoint (identity) for your Home Assistant.
3. A JWT (Java Web Token) is the output of endpoint creation. This is a plain ASCII text file generated by your ZITI controller. You will need to copy the text within the JWT file and paste it exactly into the Home Assistant's NetFoundry OpenZITI addon configuration pane "EnrollmentJWT" field.
4. Once successfully registered after the application is started (Check Logs), you may remove the JWT text from the field. If this is not done, subsequent startups will attempt enrollment, but fail to enroll the already utilized JWT and simply move into runtime.

You may register more than one identity (once per application startup) if desired, however, at least one identity is required to run. YES, you CAN enable your Home Assistant to participate as an identity in multiple networks!

If you need to remove an identity, you can log into your Home Assistant (IE SSH) and navigate to the identity directory (DEFAULT is /share/NetFoundry/identities). You will find all of your enrolled identities in this directory. Simply delete the identity file (JSON) and restart the application.

If you delete the addon, the identities directory and enrolled identities within it will be retained should you reinstall later.

For more information, see the open source project page at [OpenZITI](https://github.com/openziti).

[aarch64-shield]: https://img.shields.io/badge/aarch64-yes-green.svg
[amd64-shield]: https://img.shields.io/badge/amd64-yes-green.svg
[armhf-shield]: https://img.shields.io/badge/armhf-yes-green.svg
[armv7-shield]: https://img.shields.io/badge/armv7-yes-green.svg
[i386-shield]: https://img.shields.io/badge/i386-yes-green.svg
